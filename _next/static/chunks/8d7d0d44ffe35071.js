(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13716,e=>{"use strict";let t,r,a;var s=e.i(43476),l=e.i(71645);let i=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),n=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,l.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:n,iconNode:c,...d},u)=>(0,l.createElement)("svg",{ref:u,...o,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:i("lucide",s),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,t])=>(0,l.createElement)(e,t)),...Array.isArray(n)?n:[n]])),d=(e,t)=>{let r=(0,l.forwardRef)(({className:r,...a},s)=>(0,l.createElement)(c,{ref:s,iconNode:t,className:i(`lucide-${n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...a}));return r.displayName=n(e),r},u=d("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),x=d("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),h=d("skip-back",[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]]),m=d("skip-forward",[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]]),f=d("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),p=e=>{let t,r=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,l={setState:a,getState:s,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e))},i=t=e(a,s,l);return l},g=e=>{let t=e?p(e):p,r=e=>(function(e,t=e=>e){let r=l.default.useSyncExternalStore(e.subscribe,l.default.useCallback(()=>t(e.getState()),[e,t]),l.default.useCallback(()=>t(e.getInitialState()),[e,t]));return l.default.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},b=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>b(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>b(t)(e)}}},v=(t?g(t):g)((r=(e,t)=>({currentTrack:null,isPlaying:!1,queue:[],currentIndex:-1,favorites:[],history:[],setCurrentTrack:t=>e({currentTrack:t}),setQueue:t=>e({queue:t}),addToHistory:t=>{e(e=>{let r=e.history.filter(e=>e.trackId!==t.trackId);return{history:[t,...r].slice(0,50)}})},playTrack:(r,a)=>{let{queue:s,addToHistory:l}=t(),i=a||s;a||i.some(e=>e.trackId===r.trackId)||(i=[r]);let n=i.findIndex(e=>e.trackId===r.trackId);l(r),e({currentTrack:r,queue:i,currentIndex:-1!==n?n:0,isPlaying:!0})},togglePlay:()=>e(e=>({isPlaying:!e.isPlaying})),setIsPlaying:t=>e({isPlaying:t}),nextTrack:()=>{let{queue:r,currentIndex:a,addToHistory:s}=t();if(a<r.length-1){let t=a+1,l=r[t];s(l),e({currentTrack:l,currentIndex:t,isPlaying:!0})}else e({isPlaying:!1})},prevTrack:()=>{let{queue:r,currentIndex:a,addToHistory:s}=t();if(a>0){let t=a-1,l=r[t];s(l),e({currentTrack:l,currentIndex:t})}},toggleFavorite:t=>{e(e=>e.favorites.some(e=>e.trackId===t.trackId)?{favorites:e.favorites.filter(e=>e.trackId!==t.trackId)}:{favorites:[...e.favorites,t]})},isFavorite:e=>t().favorites.some(t=>t.trackId===e)}),a={name:"snaptune-storage",partialize:e=>({favorites:e.favorites,history:e.history}),skipHydration:!0},(e,t,s)=>{let l,i={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let a=e=>null===e?null:JSON.parse(e,void 0),s=null!=(t=r.getItem(e))?t:null;return s instanceof Promise?s.then(a):a(s)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...a},n=!1,o=0,c=new Set,d=new Set,u=i.storage;if(!u)return r((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),e(...t)},t,s);let x=()=>{let e=i.partialize({...t()});return u.setItem(i.name,{state:e,version:i.version})},h=s.setState;s.setState=(e,t)=>(h(e,t),x());let m=r((...t)=>(e(...t),x()),t,s);s.getInitialState=()=>m;let f=()=>{var r,a;if(!u)return;let s=++o;n=!1,c.forEach(e=>{var r;return e(null!=(r=t())?r:m)});let h=(null==(a=i.onRehydrateStorage)?void 0:a.call(i,null!=(r=t())?r:m))||void 0;return b(u.getItem.bind(u))(i.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===i.version)return[!1,e.state];else{if(i.migrate){let t=i.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(r=>{var a;if(s!==o)return;let[n,c]=r;if(e(l=i.merge(c,null!=(a=t())?a:m),!0),n)return x()}).then(()=>{s===o&&(null==h||h(l,void 0),l=t(),n=!0,d.forEach(e=>e(l)))}).catch(e=>{s===o&&(null==h||h(void 0,e))})};return s.persist={setOptions:e=>{i={...i,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>f(),hasHydrated:()=>n,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},i.skipHydration||f(),l||m}));function k(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,a,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t)if(Array.isArray(t)){var l=t.length;for(r=0;r<l;r++)t[r]&&(a=e(t[r]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a);return s}(e))&&(a&&(a+=" "),a+=t);return a}let j=({children:e,className:t="",speed:r=30})=>{let[a,i]=(0,l.useState)(!1),[n,o]=(0,l.useState)(0),c=(0,l.useRef)(null),d=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=()=>{if(!c.current||!d.current)return;let e=c.current.clientWidth,t=d.current.scrollWidth,s=a?(t-32)/2:t,l=s>e;l!==a&&i(l),l&&o((s+32)/r)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[e,r,a]),(0,s.jsx)("div",{ref:c,className:`overflow-hidden whitespace-nowrap ${t}`,children:(0,s.jsxs)("div",{ref:d,className:`inline-block ${a?"animate-marquee":""}`,style:a?{animationDuration:`${n}s`}:void 0,children:[e,a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"inline-block w-8"}),e]})]})})};function y(){let{currentTrack:e,isPlaying:t,togglePlay:r,nextTrack:a,prevTrack:i,setIsPlaying:n,toggleFavorite:o,isFavorite:c}=v(),d=(0,l.useRef)(null),[p,g]=(0,l.useState)(0),[b,y]=(0,l.useState)(0);(0,l.useEffect)(()=>{d.current&&(t?d.current.play().catch(e=>{console.error("Playback failed:",e),n(!1)}):d.current.pause())},[t,e,n]),(0,l.useEffect)(()=>{},[]),(0,l.useEffect)(()=>{"mediaSession"in navigator&&e&&(navigator.mediaSession.metadata=new MediaMetadata({title:e.trackName,artist:e.artistName,album:e.collectionName,artwork:[{src:e.artworkUrl60,sizes:"60x60",type:"image/jpeg"},{src:e.artworkUrl100,sizes:"100x100",type:"image/jpeg"}]}),navigator.mediaSession.setActionHandler("play",()=>{r()}),navigator.mediaSession.setActionHandler("pause",()=>{r()}),navigator.mediaSession.setActionHandler("previoustrack",()=>{i()}),navigator.mediaSession.setActionHandler("nexttrack",()=>{a()}))},[e,r,a,i]);let w=e=>{let t=Number(e.target.value);d.current&&(d.current.currentTime=t,g(t))},N=e=>{if(isNaN(e))return"0:00";let t=Math.floor(e/60),r=Math.floor(e%60);return`${t}:${r.toString().padStart(2,"0")}`};return e?(0,s.jsxs)("div",{className:"w-full bg-black border-t border-neutral-900 px-3 pt-2 pb-6 md:px-4 md:py-4",children:[(0,s.jsx)("audio",{ref:d,src:e.previewUrl,onTimeUpdate:()=>{d.current&&(g(d.current.currentTime),y(d.current.duration||0))},onEnded:a,onPause:()=>n(!1),onPlay:()=>n(!0)}),(0,s.jsxs)("div",{className:"md:hidden flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("img",{src:e.artworkUrl60,alt:e.trackName,className:"w-10 h-10 rounded-sm object-cover bg-neutral-800 shrink-0"}),(0,s.jsx)("div",{className:"flex-1 min-w-0 overflow-hidden",children:(0,s.jsxs)(j,{className:"w-full",children:[(0,s.jsx)("span",{className:"font-medium text-white text-sm mr-2",children:e.trackName}),(0,s.jsx)("span",{className:"text-neutral-400 text-xs",children:e.artistName})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-3 shrink-0",children:[(0,s.jsx)("button",{onClick:i,className:"text-neutral-400 hover:text-white transition-colors",children:(0,s.jsx)(h,{size:18})}),(0,s.jsx)("button",{onClick:r,className:"bg-white text-black p-1.5 rounded-full hover:scale-105 transition-transform",children:t?(0,s.jsx)(x,{size:18,fill:"currentColor"}):(0,s.jsx)(u,{size:18,fill:"currentColor"})}),(0,s.jsx)("button",{onClick:a,className:"text-neutral-400 hover:text-white transition-colors",children:(0,s.jsx)(m,{size:18})}),(0,s.jsx)("button",{onClick:()=>o(e),className:k("transition-colors",c(e.trackId)?"text-red-500":"text-neutral-500"),children:(0,s.jsx)(f,{size:18,fill:c(e.trackId)?"currentColor":"none"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,s.jsx)("span",{className:"text-[10px] text-neutral-500 w-6 text-right font-mono",children:N(p)}),(0,s.jsx)("input",{type:"range",min:"0",max:b||100,value:p,onChange:w,className:"flex-1 h-0.5 bg-neutral-800 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2 [&::-webkit-slider-thumb]:h-2 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full"}),(0,s.jsx)("span",{className:"text-[10px] text-neutral-500 w-6 font-mono",children:N(b)})]})]}),(0,s.jsxs)("div",{className:"hidden md:flex max-w-7xl mx-auto items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 w-1/3 min-w-0",children:[(0,s.jsx)("img",{src:e.artworkUrl60,alt:e.trackName,className:"w-14 h-14 rounded-sm object-cover bg-neutral-800"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("h4",{className:"font-medium text-white truncate text-base",children:e.trackName}),(0,s.jsx)("p",{className:"text-xs text-neutral-400 truncate",children:e.artistName})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsx)("button",{onClick:i,className:"text-neutral-400 hover:text-white transition-colors",children:(0,s.jsx)(h,{size:20})}),(0,s.jsx)("button",{onClick:r,className:"bg-white text-black p-2 rounded-full hover:scale-105 transition-transform",children:t?(0,s.jsx)(x,{size:20,fill:"currentColor"}):(0,s.jsx)(u,{size:20,fill:"currentColor"})}),(0,s.jsx)("button",{onClick:a,className:"text-neutral-400 hover:text-white transition-colors",children:(0,s.jsx)(m,{size:20})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full max-w-md",children:[(0,s.jsx)("span",{className:"text-[10px] text-neutral-500 w-8 text-right font-mono",children:N(p)}),(0,s.jsx)("input",{type:"range",min:"0",max:b||100,value:p,onChange:w,className:"flex-1 h-0.5 bg-neutral-800 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2 [&::-webkit-slider-thumb]:h-2 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:scale-150 transition-all"}),(0,s.jsx)("span",{className:"text-[10px] text-neutral-500 w-8 font-mono",children:N(b)})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-end gap-2 w-1/3",children:(0,s.jsx)("button",{onClick:()=>o(e),className:k("p-2 rounded-full transition-colors hover:bg-neutral-800",c(e.trackId)?"text-red-500":"text-neutral-500 hover:text-white"),title:"Toggle Favorite",children:(0,s.jsx)(f,{size:18,fill:c(e.trackId)?"currentColor":"none"})})})]})]}):null}let w=d("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),N=d("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),C=d("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);function S({children:e,activeTab:t,onTabChange:r}){let{currentTrack:a}=v();return(0,s.jsxs)("div",{className:"min-h-screen bg-black text-white flex",children:[(0,s.jsxs)("aside",{className:"w-64 bg-black p-6 flex flex-col gap-8 sticky top-0 h-screen hidden md:flex border-r border-neutral-900",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-2 text-white mb-2",children:[(0,s.jsx)(w,{className:"w-8 h-8"}),(0,s.jsx)("span",{className:"text-xl font-bold",children:"SnapTune"})]}),(0,s.jsxs)("nav",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("button",{onClick:()=>r("home"),className:k("flex items-center gap-4 px-4 py-3 rounded-md transition-colors font-medium text-left","home"===t?"bg-neutral-800 text-white":"text-neutral-400 hover:text-white hover:bg-neutral-800/50"),children:[(0,s.jsx)(N,{size:24}),(0,s.jsx)("span",{children:"Home"})]}),(0,s.jsxs)("button",{onClick:()=>r("favorites"),className:k("flex items-center gap-4 px-4 py-3 rounded-md transition-colors font-medium text-left","favorites"===t?"bg-neutral-800 text-white":"text-neutral-400 hover:text-white hover:bg-neutral-800/50"),children:[(0,s.jsx)(f,{size:24}),(0,s.jsx)("span",{children:"Favorites"})]}),(0,s.jsxs)("button",{onClick:()=>r("history"),className:k("flex items-center gap-4 px-4 py-3 rounded-md transition-colors font-medium text-left","history"===t?"bg-neutral-800 text-white":"text-neutral-400 hover:text-white hover:bg-neutral-800/50"),children:[(0,s.jsx)(C,{size:24}),(0,s.jsx)("span",{children:"History"})]})]})]}),(0,s.jsxs)("main",{className:k("flex-1 flex flex-col min-h-screen relative w-full overflow-x-hidden",a?"pb-[200px] md:pb-24":"pb-[100px] md:pb-0"),children:[(0,s.jsxs)("div",{className:"md:hidden p-4 flex items-center justify-between sticky top-0 bg-black z-40 border-b border-neutral-900",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(w,{className:"w-6 h-6"}),(0,s.jsx)("span",{className:"font-bold",children:"SnapTune"})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{onClick:()=>r("home"),className:k("home"===t?"text-white":"text-neutral-400"),children:(0,s.jsx)(N,{size:24})}),(0,s.jsx)("button",{onClick:()=>r("favorites"),className:k("favorites"===t?"text-white":"text-neutral-400"),children:(0,s.jsx)(f,{size:24})}),(0,s.jsx)("button",{onClick:()=>r("history"),className:k("history"===t?"text-white":"text-neutral-400"),children:(0,s.jsx)(C,{size:24})})]})]}),(0,s.jsx)("div",{className:"p-6 md:p-8 max-w-7xl mx-auto w-full",children:e})]}),(0,s.jsxs)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-black/95 backdrop-blur border-t border-neutral-900 flex justify-around pt-2 pb-8 z-[60]",children:[(0,s.jsxs)("button",{onClick:()=>r("home"),className:k("flex flex-col items-center gap-1 p-2 rounded-lg transition-colors","home"===t?"text-white":"text-neutral-500"),children:[(0,s.jsx)(N,{size:24}),(0,s.jsx)("span",{className:"text-xs",children:"Home"})]}),(0,s.jsxs)("button",{onClick:()=>r("favorites"),className:k("flex flex-col items-center gap-1 p-2 rounded-lg transition-colors","favorites"===t?"text-white":"text-neutral-500"),children:[(0,s.jsx)(f,{size:24}),(0,s.jsx)("span",{className:"text-xs",children:"Favorites"})]}),(0,s.jsxs)("button",{onClick:()=>r("history"),className:k("flex flex-col items-center gap-1 p-2 rounded-lg transition-colors","history"===t?"text-white":"text-neutral-500"),children:[(0,s.jsx)(C,{size:24}),(0,s.jsx)("span",{className:"text-xs",children:"History"})]})]}),(0,s.jsx)("div",{className:k("fixed left-0 right-0 z-50","bottom-[90px] md:bottom-0",!a&&"hidden"),children:(0,s.jsx)(y,{})})]})}let z=d("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),I=d("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function T({onSearch:e,initialValue:t="",className:r}){let[a,i]=(0,l.useState)(t);return(0,s.jsxs)("form",{onSubmit:t=>{t.preventDefault(),a.trim()&&e(a)},className:k("relative w-full max-w-xl",r),children:[(0,s.jsx)(z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),(0,s.jsx)("input",{type:"text",value:a,onChange:t=>{let r=t.target.value;i(r),r.trim()&&e(r)},placeholder:"What do you want to play?",className:"w-full bg-neutral-900 text-white rounded-full py-3.5 pl-12 pr-10 outline-none border border-neutral-800 focus:border-neutral-700 transition-colors placeholder:text-neutral-600"}),a&&(0,s.jsx)("button",{type:"button",onClick:()=>i(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-white",children:(0,s.jsx)(I,{size:18})})]})}let M=d("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);function E({track:e,contextTracks:t}){let{currentTrack:r,isPlaying:a,playTrack:l,togglePlay:i,toggleFavorite:n,isFavorite:o}=v(),c=r?.trackId===e.trackId,d=o(e.trackId);return(0,s.jsxs)("div",{onClick:()=>{c?i():l(e,t)},className:"group relative rounded-lg p-3 transition-colors hover:bg-neutral-800/50 flex flex-col gap-3 cursor-pointer",children:[(0,s.jsxs)("div",{className:"relative aspect-square w-full overflow-hidden rounded-md",children:[(0,s.jsx)("img",{src:e.artworkUrl100.replace("100x100","300x300"),alt:e.trackName,className:"w-full h-full object-cover transition-transform group-hover:scale-105",loading:"lazy"}),(0,s.jsx)("div",{className:k("absolute inset-0 flex items-center justify-center bg-black/40 transition-opacity opacity-0 group-hover:opacity-100",c&&"opacity-100 bg-black/60"),children:(0,s.jsx)("div",{className:k("p-3 rounded-full bg-white text-black transform transition-transform scale-90 group-hover:scale-100 shadow-lg",c&&"scale-100"),children:c&&a?(0,s.jsx)(x,{size:24,fill:"currentColor"}):(0,s.jsx)(u,{size:24,fill:"currentColor"})})})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,s.jsx)("h3",{className:"font-medium text-white truncate text-sm",title:e.trackName,children:e.trackName}),(0,s.jsx)("p",{className:"text-xs text-neutral-400 truncate",title:e.artistName,children:e.artistName})]}),(0,s.jsx)("div",{className:"flex items-center justify-between mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.trackViewUrl&&(0,s.jsxs)("a",{href:e.trackViewUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"text-xs text-neutral-500 hover:text-white flex items-center gap-1 transition-colors relative z-10",children:["More ",(0,s.jsx)(M,{size:10})]})}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),n(e)},className:k("absolute top-2 right-2 p-2 rounded-full transition-colors z-10",d?"text-red-500":"text-white/50 opacity-0 group-hover:opacity-100 hover:text-white"),children:(0,s.jsx)(f,{size:16,fill:d?"currentColor":"none"})})]})}function U({tracks:e,title:t,emptyMessage:r="No tracks found"}){return 0===e.length?(0,s.jsxs)("div",{className:"flex flex-col gap-4 py-8 items-center justify-center text-center",children:[t&&(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:t}),(0,s.jsx)("p",{className:"text-neutral-500",children:r})]}):(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[t&&(0,s.jsx)("h2",{className:"text-xl font-bold",children:t}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:e.map(t=>(0,s.jsx)(E,{track:t,contextTracks:e},t.trackId))})]})}let P=async(e,t=50)=>{if(!e.trim())return[];let r=new URLSearchParams({term:e,media:"all",entity:"song",limit:t.toString()});try{let e=await fetch(`https://itunes.apple.com/search?${r.toString()}`);if(!e.ok)throw Error("Network response was not ok");return(await e.json()).results}catch(e){return console.error("Error searching tracks:",e),[]}},A=e=>{let t=e.link?.find(e=>"enclosure"===e.attributes.rel),r=e.link?.find(e=>"alternate"===e.attributes.rel)?.attributes.href||e.id.label,a=e["im:image"]||[],s=a.find(e=>"170"===e.attributes.height)?.label||a[a.length-1]?.label||"",l=a.find(e=>"60"===e.attributes.height)?.label||a[0]?.label||"";return{trackId:Number(e.id.attributes["im:id"]),trackName:e["im:name"]?.label||"Unknown Title",artistName:e["im:artist"]?.label||"Unknown Artist",collectionName:e["im:collection"]?.["im:name"]?.label||"",previewUrl:t?.attributes.href||"",artworkUrl100:s,artworkUrl60:l,releaseDate:e["im:releaseDate"]?.label||"",primaryGenreName:e.category?.attributes?.label||"",trackTimeMillis:0,trackViewUrl:r||""}},H=async()=>{try{let e=await fetch("https://itunes.apple.com/jp/rss/topsongs/limit=100/json");if(!e.ok)throw Error("Failed to fetch top tracks");return(await e.json()).feed.entry.map(A)}catch(e){return console.error("Error fetching top tracks:",e),[]}};e.s(["default",0,function(){let[e,t]=(0,l.useState)("home"),[r,a]=(0,l.useState)([]),[i,n]=(0,l.useState)([]),[o,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(!1),[x,h]=(0,l.useState)(""),m=function(e,t){let[r,a]=(0,l.useState)(e);return(0,l.useEffect)(()=>{let t=setTimeout(()=>{a(e)},500);return()=>{clearTimeout(t)}},[e,500]),r}(x,0),{favorites:f,history:p}=v();return(0,l.useEffect)(()=>{v.persist.rehydrate()},[]),(0,l.useEffect)(()=>{(async()=>{u(!0);try{let e=await H();n(e)}catch(e){console.error("Failed to load top tracks",e)}finally{u(!1)}})()},[]),(0,l.useEffect)(()=>{(async()=>{if(m.trim()){c(!0),u(!0);try{let e=await P(m);a(e)}catch(e){console.error("Search failed",e)}finally{u(!1)}}else""===m&&(c(!1),a([]))})()},[m]),(0,s.jsxs)(S,{activeTab:e,onTabChange:t,children:["home"===e&&(0,s.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-6 pt-8 pb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:o?`Results for "${x}"`:"Discover"}),(0,s.jsx)(T,{onSearch:e=>{h(e)},initialValue:x}),o&&(0,s.jsx)("button",{onClick:()=>{h("")},className:"text-sm text-neutral-400 hover:text-white self-start",children:"‚Üê Back to Top Hits"})]}),d?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}):(0,s.jsx)(U,{tracks:o?r:i,title:o?void 0:"Top Hits",emptyMessage:o?`No results found for "${x}"`:"No tracks available"})]}),"favorites"===e&&(0,s.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-6 pt-8 pb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Your Favorites"}),(0,s.jsxs)("p",{className:"text-neutral-500",children:[f.length," songs"]})]}),(0,s.jsx)(U,{tracks:f,emptyMessage:"You haven't added any songs to your favorites yet."})]}),"history"===e&&(0,s.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-6 pt-8 pb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Recently Played"}),(0,s.jsxs)("p",{className:"text-neutral-500",children:[p.length," songs"]})]}),(0,s.jsx)(U,{tracks:p,emptyMessage:"No playback history yet."})]})]})}],13716)}]);